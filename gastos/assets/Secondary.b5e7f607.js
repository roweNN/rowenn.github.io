import{d as V,r as b,s as I,o as T,b as d,c,e as o,t as x,j as $,F as h,h as g,k as r,v as u,q as p,m as M}from"./index.a53329dd.js";import{d as f,E as R}from"./es.b393bca0.js";const O={class:"container mx-auto"},N={class:"selection:bg-blue-100"},D={class:"grid grid-cols-6 py-5 text-center mb-3"},G={class:"col-span-6"},z={class:"text-2xl font-bold"},B={class:"col-span-5"},L=["onUpdate:modelValue"],P={class:"col-span-1"},Y=["onClick"],j={class:"col-span-1"},J=["onClick"],Q={class:"col-span-7 mt-5"},q={class:"grid grid-cols-6"},H=o("div",{class:"col-span-4"},[o("small",null,"ITEMS")],-1),K={class:"col-span-2 ml-auto"},W=["onClick"],X={class:"grid grid-cols-7 gap-3"},Z={class:"col-span-3"},tt=["onUpdate:modelValue"],et={class:"col-span-3"},ot=["onUpdate:modelValue"],st={class:"col-span-1"},nt=["onUpdate:modelValue"],lt={key:0,class:"col-span-6"},at=o("p",{class:"text-sm text-center"},"No hay items",-1),dt=[at],ct={class:"col-span-7 mt-2 border border-t-1"},it={class:"grid grid-cols-7 gap-3"},rt=o("div",{class:"col-span-6 text-right"},[o("span",null,"TOTAL")],-1),ut={class:"col-span-1"},pt={class:"grid grid-cols-7"},mt={class:"col-span-7"},vt={class:"grid grid-cols-6"},ht=o("div",{class:"col-span-4"},[o("span",{class:"text-2xl font-bold"},"PAGOS")],-1),gt={class:"col-span-2 ml-auto"},_t={class:"grid grid-cols-7 gap-3"},bt={class:"col-span-3"},xt=["onUpdate:modelValue"],ft={class:"col-span-3"},yt=["onUpdate:modelValue"],wt={class:"col-span-1"},Ft=["onClick"],kt=V({__name:"Secondary",setup(Ct){const _=f().subtract(1,"month").format("MMMM"),y=f().format("YYYY"),a=b([]),i=b([]),w=()=>{a.value=[{id:1,name:"Remuneraciones",items:[{id:1,name:"",amount:0}]},{id:2,name:"Servicios",items:[]},{id:3,name:"Aseo y Mantenci\xF3n",items:[]}]},F=t=>{a.value=a.value.filter(e=>e.id!==t.id)},C=t=>{const e=a.value.findIndex(n=>n.id===t.id);if(e>0){const n=a.value[e-1];a.value[e-1]=t,a.value[e]=n}};I(()=>a.value,(t,e)=>{console.log("newVal",t),console.log("oldVal",e),localStorage.setItem("details",JSON.stringify(t))},{deep:!0}),T(()=>{const t=localStorage.getItem("details");t&&(a.value=JSON.parse(t))});const S=()=>{const t=a.value[a.value.length-1];a.value.push({id:t?t.id+1:1,name:"Otros",items:[]})},U=t=>{const e=i.value[i.value.length-1];i.value.push({id:e!=null?e.id+1:1,name:"",amount:0})},k=t=>{i.value=i.value.filter(e=>e.id!==t.id)},E=t=>{const e=t.items[t.items.length-1];t.items.push({id:e?e.id+1:1,name:"",description:"",amount:0})},m=t=>{let e=0;return t.items.forEach(n=>{e+=n.amount}),e},v=t=>new Intl.NumberFormat("de-DE").format(t),A=()=>{const t=new R;let e=15;t.setFontSize(16),t.setFont("helvetica","bold"),t.text("GASTOS COMUNES GALERIA CAMARA DE COMERCIO",100,e,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),e+=15,t.text("RUT: 65.188.731-3",20,e),e+=5,t.text("Direccion: Bulnes 136 Talcahuano",20,e),t.rect(20,e+2,170,.1,"F"),e+=15,t.setFont("helvetica","bold"),t.setFontSize(14),t.text(`GASTO COMUN DE ${_.toUpperCase()} DE ${y}`,100,e,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),a.value.forEach(s=>{e+=10,t.setFont("helvetica","bold"),t.text(s.name,20,e),t.setFont("helvetica","normal"),t.setFont("helvetica","bold"),t.text(`$${v(m(s))}`,190,e,{align:"right"}),t.setFont("helvetica","normal"),t.rect(20,e+2,170,.1,"F"),e+=5,s.items.forEach(l=>{e+=5,t.text(l.name,20,e),t.text(l.description,80,e),t.text(`$${v(l.amount.toString())}`,190,e,{align:"right"})})}),e+=10,t.rect(20,e+2,170,.1,"F"),t.setFont("helvetica","bold"),t.text("TOTAL",20,e+10);const n=a.value.reduce((s,l)=>s+m(l),0);t.text(`$${v(n)}`,190,e+10,{align:"right"}),t.output("dataurlnewwindow")};return(t,e)=>(d(),c("div",O,[o("div",N,[o("div",D,[o("div",G,[o("h3",z,"Mes "+x($(_)),1)])]),(d(!0),c(h,null,g(a.value,n=>(d(),c("div",{class:"grid grid-cols-7 py-5 border px-3 mb-5 bg-gray-100",key:n.id},[o("div",B,[r(o("input",{type:"text",class:"w-full border text-2xl rounded px-2 py-1 bg-white","onUpdate:modelValue":s=>n.name=s},null,8,L),[[u,n.name]])]),o("div",P,[o("button",{class:"bg-yellow-500 hover:bg-yellow-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>C(n)}," SUBIR ",8,Y)]),o("div",j,[o("button",{class:"bg-red-500 hover:bg-red-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>F(n)}," QUITAR ",8,J)]),o("div",Q,[o("div",q,[H,o("div",K,[o("button",{onClick:s=>E(n),class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded"}," + ",8,W)])])]),(d(!0),c(h,null,g(n.items,s=>(d(),c("div",{class:"col-span-7 mb-3",key:s.id},[o("div",X,[o("div",Z,[r(o("input",{type:"text",class:p(["w-full border rounded px-2 py-1",{"border-red-400":s.name==""}]),"onUpdate:modelValue":l=>s.name=l,onFocus:e[0]||(e[0]=l=>l.target.select())},null,42,tt),[[u,s.name]])]),o("div",et,[r(o("input",{type:"text",class:"w-full border rounded px-2 py-1","onUpdate:modelValue":l=>s.description=l,onFocus:e[1]||(e[1]=l=>l.target.select())},null,40,ot),[[u,s.description]])]),o("div",st,[r(o("input",{type:"number",class:p(["w-full border rounded px-2 py-1 text-right",{"border-red-400":s.amount==0}]),"onUpdate:modelValue":l=>s.amount=l,onFocus:e[2]||(e[2]=l=>l.target.select())},null,42,nt),[[u,s.amount]])])])]))),128)),n.items.length==0?(d(),c("div",lt,dt)):M("",!0),o("div",ct,[o("div",it,[rt,o("div",ut,"$"+x(m(n)),1)])])]))),128)),o("div",pt,[o("div",mt,[o("div",vt,[ht,o("div",gt,[o("button",{onClick:e[3]||(e[3]=n=>U()),class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded"}," + ")])])]),(d(!0),c(h,null,g(i.value,n=>(d(),c("div",{class:"col-span-7 mb-3",key:n.id},[o("div",_t,[o("div",bt,[r(o("input",{type:"text",class:p(["w-full border rounded px-2 py-1",{"border-red-400":n.name==""}]),"onUpdate:modelValue":s=>n.name=s,onFocus:e[4]||(e[4]=s=>s.target.select())},null,42,xt),[[u,n.name]])]),o("div",ft,[r(o("input",{type:"number",class:p(["w-full border rounded px-2 py-1 text-right",{"border-red-400":n.amount==0}]),"onUpdate:modelValue":s=>n.amount=s,onFocus:e[5]||(e[5]=s=>s.target.select())},null,42,yt),[[u,n.amount]])]),o("div",wt,[o("button",{class:"bg-red-500 hover:bg-red-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>k(n)}," QUITAR ",8,Ft)])])]))),128))]),o("div",{class:"grid grid-cols-6 py-5 gap-2"},[o("div",{class:"col-span-2"},[o("button",{onClick:w,class:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold px-4 rounded w-full py-3"}," RESET ")]),o("div",{class:"col-span-2"},[o("button",{onClick:S,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold px-4 rounded w-full py-3"}," AGREGAR ")]),o("div",{class:"col-span-2"},[o("button",{onClick:A,class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded w-full py-3"}," GENERAR ")])])])]))}});export{kt as default};
