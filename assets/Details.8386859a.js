import{d as E,r as A,s as U,o as I,b as c,c as d,e as o,t as g,j as N,F as _,h as b,k as i,v as r,q as x,m as R}from"./index.a53329dd.js";import{d as u,E as T}from"./es.b393bca0.js";const M={class:"container mx-auto"},V={class:"selection:bg-blue-100"},D={class:"grid grid-cols-6 py-5 text-center mb-3"},O={class:"col-span-6"},$={class:"text-2xl font-bold"},z={class:"col-span-5"},B=["onUpdate:modelValue"],L={class:"col-span-1"},G=["onClick"],Y={class:"col-span-1"},j=["onClick"],J={class:"col-span-7 mt-5"},q={class:"grid grid-cols-6"},P=o("div",{class:"col-span-4"},[o("small",null,"ITEMS")],-1),Q={class:"col-span-2 ml-auto"},H=["onClick"],K={class:"grid grid-cols-7 gap-3"},W={class:"col-span-3"},X=["onUpdate:modelValue"],Z={class:"col-span-3"},ee=["onUpdate:modelValue"],te={class:"col-span-1"},oe=["onUpdate:modelValue"],se={key:0,class:"col-span-6"},ne=o("p",{class:"text-sm text-center"},"No hay items",-1),le=[ne],ae={class:"col-span-7 mt-2 border border-t-1"},ce={class:"grid grid-cols-7 gap-3"},de=o("div",{class:"col-span-6 text-right"},[o("span",null,"TOTAL")],-1),ie={class:"col-span-1"},me=E({__name:"Details",setup(re){u.locale("es");const p=u().subtract(0,"month").format("MMMM"),f=u().format("YYYY"),a=A([]),y=()=>{a.value=[]},F=e=>{a.value=a.value.filter(t=>t.id!==e.id)},w=e=>{const t=a.value.findIndex(n=>n.id===e.id);if(t>0){const n=a.value[t-1];a.value[t-1]=e,a.value[t]=n}};U(()=>a.value,(e,t)=>{console.log("newVal",e),console.log("oldVal",t),localStorage.setItem("detail",JSON.stringify(e))},{deep:!0}),I(()=>{const e=localStorage.getItem("detail");e&&(a.value=JSON.parse(e))});const S=()=>{const e=a.value[a.value.length-1];a.value.push({id:e?e.id+1:1,name:"Otros",items:[]})},C=e=>{const t=e.items[e.items.length-1];e.items.push({id:t?t.id+1:1,name:"",description:"",amount:0})},m=e=>{let t=0;return e.items.forEach(n=>{t+=n.amount}),t},h=e=>new Intl.NumberFormat("de-DE").format(e),k=()=>{const e=new T;let t=15;e.setFontSize(16),e.setFont("helvetica","bold"),e.text("GASTOS COMUNES GALERIA CAMARA DE COMERCIO",100,t,{align:"center"}),e.setFontSize(12),e.setFont("helvetica","normal"),t+=15,e.text("RUT: 65.188.731-3",20,t),t+=5,e.text("Direccion: Bulnes 136 Talcahuano",20,t),e.rect(20,t+2,170,.1,"F"),t+=15,e.setFont("helvetica","bold"),e.setFontSize(14),e.text(`${p.toUpperCase()} DE ${f}`,100,t,{align:"center"}),e.setFontSize(12),e.text("Se\xF1or Copropietario",20,t+10),t+=5,e.text("Local/Oficina N\xB0:",20,t+10),t+=15,e.setFontSize(12),e.setFont("helvetica","normal"),a.value.forEach(s=>{t+=10,e.setFont("helvetica","bold"),e.text(s.name,20,t),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.setFont("helvetica","normal"),e.rect(20,t+2,170,.1,"F"),t+=5,s.items.forEach(l=>{t+=5,e.text(l.name,20,t),e.text(l.description,80,t);const v=l.amount;v&&e.text(`$${h(v)}`,190,t,{align:"right"})})}),t+=5,e.rect(20,t+2,170,.1,"F"),t+=10,e.setFont("helvetica","bold"),e.text("TOTAL",20,t+10),e.line(38,t+11,80,t+11);const n=a.value.reduce((s,l)=>s+m(l),0);n&&e.text(`$${h(n)}`,190,t+10,{align:"right"}),e.rect(120,t+10,70,40),e.text("FIRMA",132,t+18,{align:"center"}),t+=20,e.setFontSize(12),e.text("Datos de Transferencia",20,t),e.setFont("helvetica","normal"),t+=7,e.text(`Nombre: Pedro Sanhueza Flores 
Banco: Scotiabank / cuenta corriente 
Rut:17.349.789-k 
N\xBA de cuenta: 974816458 
Correo: adm.cecdc@gmail.com`,20,t),e.output("dataurlnewwindow")};return(e,t)=>(c(),d("div",M,[o("div",V,[o("div",D,[o("div",O,[o("h3",$,"Mes "+g(N(p)),1)])]),(c(!0),d(_,null,b(a.value,n=>(c(),d("div",{class:"grid grid-cols-7 py-5 border px-3 mb-5 bg-gray-100",key:n.id},[o("div",z,[i(o("input",{type:"text",class:"w-full border text-2xl rounded px-2 py-1 bg-white","onUpdate:modelValue":s=>n.name=s},null,8,B),[[r,n.name]])]),o("div",L,[o("button",{class:"bg-yellow-500 hover:bg-yellow-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>w(n)}," SUBIR ",8,G)]),o("div",Y,[o("button",{class:"bg-red-500 hover:bg-red-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>F(n)}," QUITAR ",8,j)]),o("div",J,[o("div",q,[P,o("div",Q,[o("button",{onClick:s=>C(n),class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded"}," + ",8,H)])])]),(c(!0),d(_,null,b(n.items,s=>(c(),d("div",{class:"col-span-7 mb-3",key:s.id},[o("div",K,[o("div",W,[i(o("input",{type:"text",class:x(["w-full border rounded px-2 py-1",{"border-red-400":s.name==""}]),"onUpdate:modelValue":l=>s.name=l,onFocus:t[0]||(t[0]=l=>l.target.select())},null,42,X),[[r,s.name]])]),o("div",Z,[i(o("input",{type:"text",class:"w-full border rounded px-2 py-1","onUpdate:modelValue":l=>s.description=l,onFocus:t[1]||(t[1]=l=>l.target.select())},null,40,ee),[[r,s.description]])]),o("div",te,[i(o("input",{type:"number",class:x(["w-full border rounded px-2 py-1 text-right",{"border-red-400":s.amount==0}]),"onUpdate:modelValue":l=>s.amount=l,onFocus:t[2]||(t[2]=l=>l.target.select())},null,42,oe),[[r,s.amount]])])])]))),128)),n.items.length==0?(c(),d("div",se,le)):R("",!0),o("div",ae,[o("div",ce,[de,o("div",ie,"$"+g(m(n)),1)])])]))),128)),o("div",{class:"grid grid-cols-6 py-5 gap-2"},[o("div",{class:"col-span-2"},[o("button",{onClick:y,class:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold px-4 rounded w-full py-3"}," RESET ")]),o("div",{class:"col-span-2"},[o("button",{onClick:S,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold px-4 rounded w-full py-3"}," AGREGAR ")]),o("div",{class:"col-span-2"},[o("button",{onClick:k,class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded w-full py-3"}," GENERAR ")])])])]))}});export{me as default};
