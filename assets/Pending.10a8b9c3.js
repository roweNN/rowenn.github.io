import{d as T,r as v,s as f,o as M,b as i,c as u,e as o,t as h,j as N,g as y,k as r,v as c,F as w,h as F,q as _,m as R}from"./index.a53329dd.js";import{d as x,E as D}from"./es.b393bca0.js";const O={class:"container mx-auto"},B={class:"selection:bg-blue-100"},L={class:"grid grid-cols-6 py-5 text-center mb-3"},z={class:"col-span-6"},G={class:"text-2xl font-bold"},Y={class:"grid grid-cols-6 py-5 text-center mb-3"},j={class:"col-span-2"},J={class:"col-span-2"},P={class:"col-span-5"},q=["onUpdate:modelValue"],H={class:"col-span-1"},Q=["onClick"],X={class:"col-span-1"},K=["onClick"],W={class:"col-span-7 my-5"},Z={class:"grid grid-cols-6"},tt=o("div",{class:"col-span-4"},[o("small",null,"ITEMS")],-1),et={class:"col-span-2 ml-auto"},ot=["onClick"],st={class:"grid grid-cols-11 gap-3"},nt={class:"col-span-1 mt-6"},lt=["onClick"],at={class:"col-span-3"},dt=o("small",null,"Nombre",-1),rt=["onUpdate:modelValue"],ct={class:"col-span-2"},it=o("small",null,"Monto",-1),ut=["onUpdate:modelValue"],pt={class:"col-span-1"},mt=o("small",null,"Dias",-1),gt=["onUpdate:modelValue"],vt={class:"col-span-2"},ht=o("small",null,"Interes",-1),_t=["onUpdate:modelValue"],xt={class:"col-span-2"},bt=o("small",null,"Total",-1),ft={type:"number",class:"w-full border rounded px-2 py-1 text-right font-bold bg-gray-50"},yt={key:0,class:"col-span-6"},wt=o("p",{class:"text-sm text-center"},"No hay items",-1),Ft=[wt],Et={class:"col-span-7 mt-2 border border-t-1"},St={class:"grid grid-cols-7 gap-3"},At=o("div",{class:"col-span-6 text-right"},[o("span",null,"TOTAL")],-1),Ct={class:"col-span-1 font-bold"},$t=T({__name:"Pending",setup(It){x.locale("es");const b=x().subtract(1,"month").format("MMMM"),E=x().format("YYYY"),a=v([]),p=v(0),m=v(0),S=()=>{a.value=[{id:1,name:"Remuneraciones",items:[{id:1,name:"",amount:0}]},{id:2,name:"Servicios",items:[]},{id:3,name:"Aseo y Mantenci\xF3n",items:[]}]},A=e=>{!window.confirm("\xBFEst\xE1 seguro de eliminar este detalle?")||(a.value=a.value.filter(n=>n.id!==e.id))},C=e=>{const t=a.value.findIndex(n=>n.id===e.id);if(t>0){const n=a.value[t-1];a.value[t-1]=e,a.value[t]=n}};f(()=>p.value,(e,t)=>{localStorage.setItem("tasa",e),m.value=e/365}),f(()=>a.value,(e,t)=>{console.log("newVal",e),console.log("oldVal",t),a.value.forEach(n=>{n.items.forEach(s=>{s.days&&(s.extra=(s.days*m.value).toFixed(2)*s.amount/100),s.total=Math.round(s.amount+s.extra)})}),localStorage.setItem("pending",JSON.stringify(e))},{deep:!0}),M(()=>{const e=localStorage.getItem("pending");e&&(a.value=JSON.parse(e));const t=localStorage.getItem("tasa");t&&(p.value=t)});const I=()=>{const e=a.value[a.value.length-1];a.value.push({id:e?e.id+1:1,name:"",items:[]})},U=e=>{const t=e.items[e.items.length-1];e.items.push({id:t?t.id+1:1,name:"",description:"",extra:"",days:0,amount:0,total:0})},g=e=>{let t=0;return e.items.forEach(n=>{t+=n.total}),t},d=e=>new Intl.NumberFormat("de-DE").format(e),V=e=>{!window.confirm("\xBFEst\xE1 seguro de eliminar este item?")||a.value.forEach(n=>{n.items=n.items.filter(s=>s.id!==e.id)})},$=()=>{const e=new D;let t=15;e.setFontSize(16),e.setFont("helvetica","bold"),e.text("GASTOS COMUNES GALERIA CAMARA DE COMERCIO",100,t,{align:"center"}),e.setFontSize(12),e.setFont("helvetica","normal"),t+=15,e.text("RUT: 65.188.731-3",20,t),t+=5,e.text("Direccion: Bulnes 136 Talcahuano",20,t),e.rect(20,t+2,170,.1,"F"),t+=15,e.setFont("helvetica","bold"),e.setFontSize(14),e.text(`PENDIENTES HASTA ${b.toUpperCase()} DE ${E}`,100,t,{align:"center"}),e.setFontSize(12),e.setFont("helvetica","normal"),a.value.forEach(s=>{t+=10,e.setFont("helvetica","bold"),e.text(s.name,20,t),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.text(`$${d(g(s))}`,190,t,{align:"right"}),e.setFont("helvetica","normal"),e.rect(20,t+2,170,.1,"F"),t+=5,s.items.forEach(l=>{t+=5,e.text(l.name,20,t),e.text(l.description,80,t),e.text(`$${d(l.amount.toString())}`,120,t,{align:"right"});const k=Math.round(l.extra);e.text(`$${d(k)}`,150,t,{align:"right"}),e.text(`$${d(l.total.toString())}`,190,t,{align:"right"})})}),t+=10,e.rect(20,t+2,170,.1,"F"),e.setFont("helvetica","bold"),e.text("TOTAL",20,t+10);const n=a.value.reduce((s,l)=>s+g(l),0);e.text(`$${d(n)}`,190,t+10,{align:"right"}),e.output("dataurlnewwindow")};return(e,t)=>(i(),u("div",O,[o("div",B,[o("div",L,[o("div",z,[o("h3",G,"Mes "+h(N(b)),1)])]),o("div",Y,[o("div",j,[y(" TASA "),r(o("input",{type:"number",class:"border rounded px-2 py-1","onUpdate:modelValue":t[0]||(t[0]=n=>p.value=n),onFocus:t[1]||(t[1]=n=>n.target.select())},null,544),[[c,p.value]])]),o("div",J,[y(" VALOR DIA "),r(o("input",{type:"number",class:"border rounded px-2 py-1","onUpdate:modelValue":t[2]||(t[2]=n=>m.value=n),onFocus:t[3]||(t[3]=n=>n.target.select())},null,544),[[c,m.value]])])]),(i(!0),u(w,null,F(a.value,n=>(i(),u("div",{class:"grid grid-cols-7 py-5 border px-3 mb-5 bg-gray-100",key:n.id},[o("div",P,[r(o("input",{type:"text",class:"w-full border text-2xl rounded px-2 py-1 bg-white","onUpdate:modelValue":s=>n.name=s},null,8,q),[[c,n.name]])]),o("div",H,[o("button",{class:"bg-yellow-500 hover:bg-yellow-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>C(n)}," SUBIR ",8,Q)]),o("div",X,[o("button",{class:"bg-red-500 hover:bg-red-700 py-2 text-white font-bold px-4 rounded w-full",onClick:s=>A(n)}," QUITAR ",8,K)]),o("div",W,[o("div",Z,[tt,o("div",et,[o("button",{onClick:s=>U(n),class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded"}," + ",8,ot)])])]),(i(!0),u(w,null,F(n.items,s=>(i(),u("div",{class:"col-span-7 mb-3",key:s.id},[o("div",st,[o("div",nt,[o("button",{onClick:l=>V(s),class:"border text-red-600 border-red-500 hover:bg-red-700 font-bold px-4 rounded w-full"}," X ",8,lt)]),o("div",at,[dt,r(o("input",{type:"text",class:_(["w-full border rounded px-2 py-1",{"border-red-400":s.name==""}]),"onUpdate:modelValue":l=>s.name=l,onFocus:t[4]||(t[4]=l=>l.target.select())},null,42,rt),[[c,s.name]])]),o("div",ct,[it,r(o("input",{type:"text",class:_(["w-full border rounded px-2 py-1 text-right",{"border-red-400":s.amount==0}]),"onUpdate:modelValue":l=>s.amount=l,onFocus:t[5]||(t[5]=l=>l.target.select())},null,42,ut),[[c,s.amount]])]),o("div",pt,[mt,r(o("input",{type:"text",class:"w-full border rounded px-2 py-1 text-center","onUpdate:modelValue":l=>s.days=l,onFocus:t[6]||(t[6]=l=>l.target.select())},null,40,gt),[[c,s.days,void 0,{number:!0}]])]),o("div",vt,[ht,r(o("input",{type:"text",class:_(["w-full border rounded px-2 py-1 text-right",{"border-red-400":s.extra==0}]),"onUpdate:modelValue":l=>s.extra=l,onFocus:t[7]||(t[7]=l=>l.target.select()),placeholder:"Extra"},null,42,_t),[[c,s.extra]])]),o("div",xt,[bt,o("div",ft," $"+h(d(s.total)),1)])])]))),128)),n.items.length==0?(i(),u("div",yt,Ft)):R("",!0),o("div",Et,[o("div",St,[At,o("div",Ct," $"+h(d(g(n))),1)])])]))),128)),o("div",{class:"grid grid-cols-6 py-5 gap-2"},[o("div",{class:"col-span-2"},[o("button",{onClick:S,class:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold px-4 rounded w-full py-3"}," RESET ")]),o("div",{class:"col-span-2"},[o("button",{onClick:I,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold px-4 rounded w-full py-3"}," AGREGAR ")]),o("div",{class:"col-span-2"},[o("button",{onClick:$,class:"bg-green-500 hover:bg-green-700 text-white font-bold px-4 rounded w-full py-3"}," GENERAR ")])])])]))}});export{$t as default};
